(this["webpackJsonpreactjs-crypto-dashboard"]=this["webpackJsonpreactjs-crypto-dashboard"]||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(41),s=n.n(a),u=n(7),i=n.n(u),o=n(25),d=n(8),b=n(42),f=n(0);var p=function(e){var t=e.price,n=e.data;return"0.00"===t?Object(f.jsx)("h2",{children:"Select a currency pair :)"}):Object(f.jsxs)("div",{className:"dashboard",children:[Object(f.jsx)("h2",{children:"$".concat(t)}),Object(f.jsx)("div",{className:"chart-container",children:Object(f.jsx)(b.Line,{data:n,options:{tooltips:{intersect:!1,mode:"index"},responsive:!0,maintainAspectRatio:!1}})})]})},j=function(e){var t={labels:[],datasets:[{label:"Price",data:[],backgroundColor:"rgb(255, 99, 132, 0.8)",borderColor:"rgba(255, 99, 132, 0.2)",fill:!1}]},n=e.map((function(e){var t=e[0],n=new Date(1e3*t),r=n.getDate(),c=n.getMonth()+1,a=n.getFullYear();return"".concat(c,"-").concat(r,"-").concat(a)})),r=e.map((function(e){return e[4]}));return r.reverse(),n.reverse(),t.labels=n,t.datasets[0].data=r,t};n(148);function l(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(d.a)(a,2),u=s[0],b=s[1],l=Object(r.useState)("0.00"),h=Object(d.a)(l,2),O=h[0],v=h[1],y=Object(r.useState)({}),m=Object(d.a)(y,2),x=m[0],g=m[1],S=Object(r.useRef)(null),w=Object(r.useRef)(!1),k="https://api.pro.coinbase.com";Object(r.useEffect)((function(){S.current=new WebSocket("wss://ws-feed.pro.coinbase.com");var e=[];(function(){var t=Object(o.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(k+"/products").then((function(e){return e.json()})).then((function(t){return e=t}));case 2:n=(n=e.filter((function(e){if("USD"===e.quote_currency)return e}))).sort((function(e,t){return e.base_currency<t.base_currency?-1:e.base_currency>t.base_currency?1:0})),c(n),w.current=!0;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){if(w.current){var e={type:"subscribe",product_ids:[u],channels:["ticker"]},t=JSON.stringify(e);S.current.send(t);var n="".concat(k,"/products/").concat(u,"/candles?granularity=86400");(function(){var e=Object(o.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){return t=e}));case 3:r=j(t),g(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),S.current.onmessage=function(e){var t=JSON.parse(e.data);"ticker"===t.type&&t.product_id===u&&v(t.price)}}}),[u]);return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("select",{name:"currency",value:u,onChange:function(e){var t={type:"unsubscribe",product_ids:[u],channels:["ticker"]},n=JSON.stringify(t);S.current.send(n),b(e.target.value)},children:n.map((function(e,t){return Object(f.jsx)("option",{value:e.id,children:e.display_name},t)}))}),Object(f.jsx)(p,{price:O,data:x})]})}s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(l,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.c7b11110.chunk.js.map